<!doctype html>
<html lang="el">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Οχήματα · Γραμματέας · AutoFix</title>

  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/dash.css" />
  <link rel="stylesheet" href="/css/vehicles-cards.css" />
</head>

<body>
  <!-- NAVBAR -->
  <div class="navbar">
    <a class="brand" href="/">
      <img class="brand-logo" src="/img/logo.png" alt="AutoFix">
      <span>Μηχανουργείο AutoFix</span>
    </a>
    <div class="nav-right">
      <span class="badge" id="navUser">—</span>
      <button class="btn ghost" data-action="logout">Αποσύνδεση</button>
    </div>
  </div>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <a href="/dashboard/secretary.html">
      <span class="ico"><svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3 13h4v8H3zM10 3h4v18h-4zM17 8h4v13h-4z" />
        </svg></span>
      Πίνακας Ελέγχου
    </a>
    <a href="/dashboard/profile.html">
      <span class="ico"><svg viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.33 0-8 2.17-8 5v1h16v-1c0-2.83-3.67-5-8-5Z" />
        </svg></span>
      Προφίλ
    </a>
    <a href="/dashboard/users.html">
      <span class="ico"><svg viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M16 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4ZM6 12a3 3 0 1 0-3-3 3 3 0 0 0 3 3Zm10 2c-3.33 0-7 1.67-7 5v2h14v-2c0-3.33-3.67-5-7-5ZM6 14c-2.67 0-6 1.33-6 4v3h7v-2.5c0-1.35.45-2.54 1.24-3.5C7.5 14.36 6.72 14 6 14Z" />
        </svg></span>
      Χρήστες
    </a>
    <a class="active" href="/dashboard/vehicles.html">
      <span class="ico"><svg viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M5 11l1.5-4.5A2 2 0 0 1 8.4 5h7.2a2 2 0 0 1 1.9 1.5L19 11h1a1 1 0 0 1 1 1v5h-2a2 2 0 0 1-4 0H9a2 2 0 0 1-4 0H3v-5a1 1 0 0 1 1-1Zm3 0h8l-1-3H9ZM7 17.5A1.5 1.5 0 1 0 8.5 16 1.5 1.5 0 0 0 7 17.5Zm10 0A1.5 1.5 0 1 0 18.5 16 1.5 1.5 0 0 0 17 17.5Z" />
        </svg></span>
      Οχήματα
    </a>
    <a href="/dashboard/appointments.html">
      <span class="ico"><svg viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M19 4h-1V2h-2v2H8V2H6v2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 16H5V9h14v11Z" />
        </svg></span>
      Ραντεβού
    </a>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <div class="page-header">
      <div>
        <h1 class="page-title">Διαχείριση Οχημάτων</h1>
        <div class="subtitle">Διαχείριση όλων των οχημάτων πελατών</div>
      </div>

      <!-- ΝΕΟ: actions δεξιά -->
      <div class="page-actions">
        <input id="importFile" type="file" accept=".csv" style="display:none" />
        <button id="btnImport" class="btn ghost" style="display:none">Εισαγωγή από αρχείο</button>
        <button id="btnAddVehicle" class="btn" style="display:none">+ Προσθήκη Οχήματος</button>
      </div>
    </div>

    <!-- Toolbar -->
    <div class="veh-toolbar">
      <input id="searchInput" class="input" placeholder="Αναζήτηση..." />
      <select id="typeSelect" class="select">
        <option value="">Όλοι οι τύποι</option>
        <option value="passenger">Επιβατικό</option>
        <option value="truck">Φορτηγό</option>
        <option value="bus">Λεωφορείο</option>
      </select>
      <span id="totalInfo" class="muted"></span>
    </div>

    <!-- Grid -->
    <section class="veh-grid" id="vehGrid">
      <!-- cards via JS -->
    </section>

    <!-- Pager -->
    <div class="veh-pager">
      <button id="btnPrev" class="btn small ghost">Προηγούμενα</button>
      <div class="muted" id="pageInfo">Σελίδα 1 / 1</div>
      <button id="btnNext" class="btn small">Επόμενα</button>
    </div>
  </main>

  <!-- Modal: Add/Edit Vehicle -->
  <div id="vehModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <h3 id="vehModalTitle">Όχημα</h3>
        <button class="btn ghost" id="vehClose">✕</button>
      </div>
      <form id="vehForm" class="form-grid">
        <label>Σειριακός Αριθμός (VIN)
          <input name="serial" class="input" required />
        </label>
        <label>Μάρκα
          <input name="make" class="input" required />
        </label>
        <label>Μοντέλο
          <input name="model" class="input" required />
        </label>
        <label>Τύπος
          <select name="type" class="select" required>
            <option value="passenger">Επιβατικό</option>
            <option value="truck">Φορτηγό</option>
            <option value="bus">Λεωφορείο</option>
          </select>
        </label>
        <label>Κινητήρας
          <select name="engine" class="select" required>
            <option value="diesel">diesel</option>
            <option value="petrol">petrol</option>
            <option value="hybrid">hybrid</option>
            <option value="electric">electric</option>
            <option value="lpg">lpg</option>
          </select>
        </label>
        <label>Θύρες
          <input name="doors" type="number" min="1" class="input" required />
        </label>
        <label>Ρόδες
          <input name="wheels" type="number" min="2" class="input" required />
        </label>
        <label>Ημ/νία Παραγωγής
          <input name="production_date" type="date" class="input" required />
        </label>
        <label>Έτος Κτήσης
          <input name="year" type="number" min="1900" max="2100" class="input" required />
        </label>

        <!-- Μόνο για γραμματέα: Δήλωση ιδιοκτήτη -->
        <!-- Υπάρχον (για CREATE): -->
        <div id="ownerRow">
          <label>Owner User ID / Username
            <input id="owner_ref" name="owner_ref" class="input" placeholder="π.χ. 7 ή john">
          </label>
        </div>

        <!-- ΝΕΟ (για EDIT): -->
        <div id="ownerReadonlyRow" style="display:none">
          <label>Ιδιοκτήτης (δεν αλλάζει)
            <div id="ownerReadonly" class="input"
              style="background:#0b162b; border:1px solid #22345a; pointer-events:none; user-select:text"></div>
          </label>
        </div>


        <div class="modal-actions">
          <button type="button" class="btn ghost" id="vehCancel">Άκυρο</button>
          <button type="submit" class="btn">Αποθήκευση</button>
        </div>
      </form>
    </div>
  </div>

  <!-- scripts -->
  <script defer src="/js/api.js"></script>
  <script defer src="/js/auth-guard.js"></script>
  <script defer src="/js/nav-user.js"></script>
  <script defer src="/js/secretary.vehicles.js"></script>
</body>

</html>