<!doctype html><html lang="el"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î»Î­Î³Ï‡Î¿Ï… Â· Î“ÏÎ±Î¼Î¼Î±Ï„Î­Î±Ï‚</title>
<link rel="stylesheet" href="/css/style.css">
<script defer src="/js/api.js"></script>
<script defer src="/js/secretary.js"></script>
</head><body>
<div class="navbar">
  <button class="btn ghost" onclick="document.body.classList.toggle('nav-open')">â˜° ÎœÎµÎ½Î¿Ï</button>
  <div class="brand"><span class="badge">AF</span> ÎœÎ·Ï‡Î±Î½Î¿Î¿Ï…ÏÎ³ÎµÎ¯Î¿ AutoFix</div>
  <div style="display:flex;gap:10px;align-items:center">
    <button class="btn ghost" onclick="logout()">Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·</button>
  </div>
</div>
<div class="sidebar">
  <a href="#dash" class="active">Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î»Î­Î³Ï‡Î¿Ï…</a>
  <a href="#profile">Î ÏÎ¿Ï†Î¯Î»</a>
  <a href="#users">Î§ÏÎ®ÏƒÏ„ÎµÏ‚</a>
  <a href="#vehicles">ÎŸÏ‡Î®Î¼Î±Ï„Î±</a>
  <a href="#appts">Î¡Î±Î½Ï„ÎµÎ²Î¿Ï</a>
</div>
<div class="main container">
  <section id="section-dash">
    <h2>Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î»Î­Î³Ï‡Î¿Ï…</h2>
    <div class="grid cols-4">
      <div class="card kpi"><div class="badge">ğŸ‘¤</div><div><div class="small">Î£ÏÎ½Î¿Î»Î¿ Î§ÏÎ·ÏƒÏ„ÏÎ½</div><div class="num" id="kpiUsers">â€“</div></div></div>
      <div class="card kpi"><div class="badge">ğŸš—</div><div><div class="small">Î£ÏÎ½Î¿Î»Î¿ ÎŸÏ‡Î·Î¼Î¬Ï„Ï‰Î½</div><div class="num" id="kpiVeh">â€“</div></div></div>
      <div class="card kpi"><div class="badge">ğŸ“…</div><div><div class="small">Î£ÏÎ½Î¿Î»Î¿ Î¡Î±Î½Ï„ÎµÎ²Î¿Ï</div><div class="num" id="kpiAp">â€“</div></div></div>
      <div class="card kpi"><div class="badge">â±ï¸</div><div><div class="small">Î£Î·Î¼ÎµÏÎ¹Î½Î¬ Î¡Î±Î½Ï„ÎµÎ²Î¿Ï</div><div class="num" id="kpiToday">â€“</div></div></div>
    </div>
    <div class="card" style="margin-top:18px">
      <h3>Recent Appointments</h3>
      <div id="recentAppts"></div>
    </div>

    <div class="card" style="margin-top:18px">
      <h3>Quick Actions</h3>
      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:10px">
        <button class="btn" onclick="location.hash='#users'">ğŸ‘¥ Manage Users</button>
        <button class="btn" onclick="location.hash='#vehicles'">ğŸš— Manage Vehicles</button>
        <button class="btn" onclick="location.hash='#appts'">ğŸ“… Manage Appointments</button>
      </div>
    </div>
  </section>

  <section id="section-profile" class="hidden">
    <h2>Î ÏÎ¿Ï†Î¯Î»</h2>
    <div class="card"><div id="profileBox">Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...</div></div>
  </section>

  <section id="section-users" class="hidden">
    <h2>Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î§ÏÎ·ÏƒÏ„ÏÎ½</h2>
    <div class="form-row">
      <input class="input" id="userQ" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· (ÎµÏ€ÏÎ½Ï…Î¼Î¿/username/Î‘Î¦Îœ)...">
      <select class="input" id="userRole"><option value="">All Roles</option><option value="customer">Î ÎµÎ»Î¬Ï„Î·Ï‚</option><option value="mechanic">ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚</option><option value="secretary">Î“ÏÎ±Î¼Î¼Î±Ï„Î­Î±Ï‚</option></select>
      <button class="btn" onclick="loadUsers()">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      <button class="btn secondary" onclick="promptAddUser()">+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î§ÏÎ®ÏƒÏ„Î·</button>
    </div>
    <div id="usersList" style="margin-top:10px"></div>
  </section>

  <section id="section-vehicles" class="hidden">
    <h2>Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎŸÏ‡Î·Î¼Î¬Ï„Ï‰Î½</h2>
    <div class="form-row">
      <input class="input" id="vehQ" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¿Ï‡Î®Î¼Î±Ï„Î¿Ï‚ (brand/model/serial)...">
      <select class="input" id="vehType"><option value="">All Types</option><option value="passenger">Passenger</option><option value="truck">Truck</option><option value="bus">Bus</option></select>
      <button class="btn" onclick="loadVehicles()">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      <button class="btn secondary" onclick="openAddVehicle()">+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎŸÏ‡Î®Î¼Î±Ï„Î¿Ï‚</button>
    </div>
    <div id="vehiclesList" style="margin-top:10px"></div>
  </section>

  <section id="section-appts" class="hidden">
    <h2>Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î¡Î±Î½Ï„ÎµÎ²Î¿Ï</h2>
    <div class="form-row">
      <input class="input" type="date" id="fFrom">
      <input class="input" type="date" id="fTo">
      <select class="input" id="fStatus"><option value="">All Status</option><option value="CREATED">Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¼Î­Î½Î¿</option><option value="IN_PROGRESS">Î£Îµ ÎµÎ¾Î­Î»Î¹Î¾Î·</option><option value="COMPLETED">Î ÎµÏÎ±Ï„Ï‰Î¼Î­Î½Î¿</option><option value="CANCELED">Î‘ÎºÏ…ÏÏ‰Î¼Î­Î½Î¿</option></select>
      <input class="input" id="fQ" placeholder="Î•Ï€ÏÎ½Ï…Î¼Î¿ Î® Î‘Î¦Îœ">
      <button class="btn" onclick="loadAppts()">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      <button class="btn" onclick="openCreateAppt()">+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î¡Î±Î½Ï„ÎµÎ²Î¿Ï</button>
    </div>
    <div id="apptsList" style="margin-top:10px"></div>
  </section>
</div>

<script>
const sections = {
  '#dash':'section-dash',
  '#profile':'section-profile',
  '#users':'section-users',
  '#vehicles':'section-vehicles',
  '#appts':'section-appts',
};
function renderNav(){
  const hash = location.hash || '#dash';
  document.querySelectorAll('.sidebar a').forEach(a => a.classList.toggle('active', a.getAttribute('href')===hash));
  Object.values(sections).forEach(id => document.getElementById(id).classList.add('hidden'));
  document.getElementById(sections[hash]).classList.remove('hidden');
}
window.addEventListener('hashchange', renderNav);
window.addEventListener('load', renderNav);
async function logout(){ await api('/api/auth/logout',{method:'POST'}); location.href='/login.html'; }
</script>
</body></html>
